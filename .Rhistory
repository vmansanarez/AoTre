setwd("C:/VMansanarez_work/03_CODES/01_VariableExtraction/Packaging")
setwd(dir = "StatsTrendAnalysis/")
#### Load current version of the package
require(StatsTrendAnalysis)
### path of data
path.data='../../../../02_DATA/France207/'
### Get list of names of all data.
file.list=list.files(path=path.data,pattern = ".txt")
### path to function
path.code.test="../../../00_FORGE/Hydrostat/trunk/R/src/"
path.code.utilities="../../../00_FORGE/Hydrostat/trunk/R/BFunk/R/"
### source code function
source(file=paste0(path.code.test,"GeneralMannKendall.R"))
### source all R code in folder.
files.sources.code.utilities = list.files(path = path.code.utilities)
sapply(paste0(path.code.utilities,files.sources.code.utilities), source)
#### Load data
datapath=paste0(path.data,file.list)
France.data=readFiles.TS(datapath=datapath)
#######################################################################
#######################################################################
### Number of year per station
data.year.data=extract.Var(data.station=France.data,funct = length)
data.year.step1=extract.Var(data.station=France.data,funct = max)
data.year.step2=group_by(.data=data.year.step1,group)
### Apply function of interest
# data.year=summarise_all(.tbl = data.year.step2,.funs = length)
data.nyear=data.year.step2 %>%
filter(!is.na(value))  %>%
count(group)
#######################################################################
#######################################################################
### FUNCTION: MAximum annual
funct_annual=max
typeF="max"
typePer="1965_2020"
period.def=c("1965-01-01","2020-01-01")
##### MAximum
data.Var.max=extract.Var(data.station=France.data,funct = funct_annual,period=period.def) ### MAximum annual
data.Var.max
data.final.max=Estimate.stats(data.extract=data.Var.max,list.stats = substr(file.list,1,8))
